/*
 Hype Data Parser 1.1.2
copyright (c) 2022 Max Ziebell, (https://maxziebell.de). MIT-license
Based on csvToArray from Daniel Tillin 2011-2013
http://code.google.com/p/csv-to-array/
*/
!1==="HypeDataParser"in window&&(window.HypeDataParser=function(){function u(b,a){for(var d=0,e=0;e<b.length;e++)b[e]==a&&d++;return d}function t(b){var a=b.indexOf("\n",1);return-1===a?-1!==b.indexOf("\r")?"\r":"\n":"\r"===b[a-1]?"\r\n":"\n"}function w(b,a,d){var e=t(b),h={};b.split(e+e).forEach(function(l,g){var k=l.split(new RegExp("^(.*):\\s(.*)"+e));if(1<k.length){var m=k[1],v=k[2];h[m]||(h[m]={});var r=a?n(k[3],d):k[3];h[m][v]=r}(r=r||(a?n(l,d):l))&&(h[g]=r)});return h}function x(b){var a=t(b);
return-1!==b.indexOf(a+a)}function n(b,a){if("string"===typeof b){if(x(b))return w(b,!0);a=a||{};a.trim=a.trim||a.trimWhitespace||!1;a.head=a.head||a.removeHead||!1;a.quot=a.quot||a.quote||'"';a.fSep=a.fSep||a.fieldSeparator||(u(b,";")>u(b,",")?";":",");a.rSep=a.rSep||a.rowSeparator||t(b);b=b.replace(/^\s\s*/,"").replace(/\s\s*$/,"");for(var d=[[""]],e=f=p=q=0;p<b.length;p++)switch(c=b.charAt(p)){case a.quot:q&&b.charAt(p+1)==a.quot?(d[e][f]+=a.quot,++p):q^=1;break;case a.fSep:q?d[e][f]+=c:(a.trim&&
(d[e][f]=d[e][f].replace(/^\s\s*/,"").replace(/\s\s*$/,"")),d[e][++f]="");break;case a.rSep.charAt(0):q||a.rSep.charAt(1)&&(!a.rSep.charAt(1)||a.rSep.charAt(1)!=b.charAt(p+1))?d[e][f]+=c:(a.trim&&(d[e][f]=d[e][f].replace(/^\s\s*/,"").replace(/\s\s*$/,"")),d[++e]=[""],d[e][f=0]="",a.rSep.charAt(1)&&++p);break;default:d[e][f]+=c}a.head&&d.shift();return d}}function y(b,a){if(b){a=a||{};Array.isArray(b)||(b=n(b,Object.assign(a,{head:!1})));var d=b.slice(1),e=b.slice(0,1)[0],h=[];d.forEach(function(l){var g=
{};l.forEach(function(k,m){g[e[m]]=k});"function"==typeof a.filter&&!1===a.filter(g,h,e)||h.push(g)});return h}}function z(b,a,d){if(b&&a){d=d||{};Array.isArray(b)||(b=n(b,Object.assign(d,{head:!1})));var e=b.slice(1),h=b.slice(0,1)[0],l="number"==typeof a?a:h.indexOf(a),g={};if(-1!=l)return e.forEach(function(k){var m={};k.forEach(function(v,r){m[h[r]]=v});k=m[h[l]];if("function"!=typeof d.filter||!1!==d.filter(m,g,h))switch(d.objectByKeyMode){case "reduce":g[k]=m;break;case "list":case "array":g[k]||
(g[k]=[]);g[k].push(m);break;default:case "auto":g[k]?(Array.isArray(g[k])||(g[k]=[g[k]]),g[k].push(m)):g[k]=m}}),g}}function A(b,a,d){if(b&&a){d=d||{};Array.isArray(b)||(b=n(b,Object.assign(d,{head:!1})));d=b.slice(1);b=b.slice(0,1)[0];var e="number"==typeof a?a:b.indexOf(a),h=[];if(-1!=e)return d.forEach(function(l){h.push(l[e])}),h}}return{version:"1.1.2",csvToArray:n,csvToObject:y,csvToObjectByKey:z,csvToArrayByKey:A,tsvToArray:function(b,a){return n(b,Object.assign(a||{},{fSep:"\t"}))},tsvToObject:function(b,
a){return y(b,Object.assign(a||{},{fSep:"\t"}))},tsvToArrayByKey:function(b,a,d){return A(b,a,Object.assign(d||{},{fSep:"\t"}))},tsvToObjectByKey:function(b,a,d){return z(b,a,Object.assign(d||{},{fSep:"\t"}))},rowsToColumns:function(b,a){if(b){a=a||{};Array.isArray(b)||(b=n(b,Object.assign(a,{head:!1})));for(var d=b.length,e=b[0].length,h=[],l=0;l<d&&b[l].length==e;l++)for(var g=0;g<e;g++)h[g]||(h[g]=[]),h[g][l]=b[l][g];return h}},getTables:w,includesTables:x,getLineBreakChar:t,countChar:u}}());
