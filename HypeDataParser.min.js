/*
 Hype Data Parser 1.0.9
copyright (c) 2022 Max Ziebell, (https://maxziebell.de). MIT-license
Based on csvToArray from Daniel Tillin 2011-2013
http://code.google.com/p/csv-to-array/
*/
!1==="HypeDataParser"in window&&(window.HypeDataParser=function(){function r(b,a){for(var d=0,e=0;e<b.length;e++)b[e]==a&&d++;return d}function t(b){var a=b.indexOf("\n",1);return-1===a?-1!==b.indexOf("\r")?"\r":"\n":"\r"===b[a-1]?"\r\n":"\n"}function n(b,a){if(b){a=a||{};a.trim=a.trim||a.trimWhitespace||!1;a.head=a.head||a.removeHead||!1;a.quot=a.quot||a.quote||'"';a.fSep=a.fSep||a.fieldSeparator||(r(b,";")>r(b,",")?";":",");a.rSep=a.rSep||a.rowSeparator||t(b);b=b.replace(/^\s\s*/,"").replace(/\s\s*$/,
"");for(var d=[[""]],e=f=p=q=0;p<b.length;p++)switch(c=b.charAt(p)){case a.quot:q&&b.charAt(p+1)==a.quot?(d[e][f]+=a.quot,++p):q^=1;break;case a.fSep:q?d[e][f]+=c:(a.trim&&(d[e][f]=d[e][f].replace(/^\s\s*/,"").replace(/\s\s*$/,"")),d[e][++f]="");break;case a.rSep.charAt(0):q||a.rSep.charAt(1)&&(!a.rSep.charAt(1)||a.rSep.charAt(1)!=b.charAt(p+1))?d[e][f]+=c:(a.trim&&(d[e][f]=d[e][f].replace(/^\s\s*/,"").replace(/\s\s*$/,"")),d[++e]=[""],d[e][f=0]="",a.rSep.charAt(1)&&++p);break;default:d[e][f]+=c}a.head&&
d.shift();d[d.length-1].length<d[0].length&&d.pop();return d}}function u(b,a){if(b){a=a||{};var d=n(b,Object.assign(a,{head:!1})),e=d.shift(),k=[];d.forEach(function(m){var g={};m.forEach(function(h,l){g[e[l]]=h});"function"==typeof a.filter&&!1===a.filter(g,k,e)||k.push(g)});return k}}function v(b,a,d){if(b&&a){d=d||{};Array.isArray(b)||(b=n(b,d));var e=b.slice(1),k=b.slice(0,1)[0],m="number"==typeof a?a:k.indexOf(a),g={};if(-1!=m)return e.forEach(function(h){var l={};h.forEach(function(x,y){l[k[y]]=
x});h=l[k[m]];if("function"!=typeof d.filter||!1!==d.filter(l,g,k))switch(d.objectByKeyMode){case "reduce":g[h]=l;break;case "list":case "array":g[h]||(g[h]=[]);g[h].push(l);break;default:case "auto":g[h]?(Array.isArray(g[h])||(g[h]=[g[h]]),g[h].push(l)):g[h]=l}}),g}}function w(b,a,d){if(b&&a){d=d||{};Array.isArray(b)||(b=n(b,d));d=b.slice(1);b=b.slice(0,1)[0];var e="number"==typeof a?a:b.indexOf(a),k=[];if(-1!=e)return d.forEach(function(m){k.push(m[e])}),k}}return{version:"1.0.9",csvToArray:n,csvToObject:u,
csvToObjectByKey:v,csvToArrayByKey:w,tsvToArray:function(b,a){return n(b,Object.assign(a||{},{fSep:"\t"}))},tsvToObject:function(b,a){return u(b,Object.assign(a||{},{fSep:"\t"}))},tsvToArrayByKey:function(b,a,d){return w(b,a,Object.assign(d||{},{fSep:"\t"}))},tsvToObjectByKey:function(b,a,d){return v(b,a,Object.assign(d||{},{fSep:"\t"}))},getLineBreakChar:t,countChar:r}}());
